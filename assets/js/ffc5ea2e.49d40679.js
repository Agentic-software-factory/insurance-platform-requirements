"use strict";(globalThis.webpackChunkinsurance_platform_requirements=globalThis.webpackChunkinsurance_platform_requirements||[]).push([[5710],{12205(e,n,s){s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"lessons-learned/LESSON-003-intake-never-writes-files","title":"LESSON-003: Intake Must Never Write Files to the Repository","description":"Date: 2026-02-10","source":"@site/docs/lessons-learned/LESSON-003-intake-never-writes-files.md","sourceDirName":"lessons-learned","slug":"/lessons-learned/LESSON-003-intake-never-writes-files","permalink":"/insurance-platform-requirements/docs/next/lessons-learned/LESSON-003-intake-never-writes-files","draft":false,"unlisted":false,"editUrl":"https://github.com/Agentic-software-factory/insurance-platform-requirements/edit/main/docs/lessons-learned/LESSON-003-intake-never-writes-files.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"requirementsSidebar","previous":{"title":"LESSON-002: Intake Must Never Run /next or Start Workers","permalink":"/insurance-platform-requirements/docs/next/lessons-learned/LESSON-002-intake-never-runs-next"},"next":{"title":"Glossary","permalink":"/insurance-platform-requirements/docs/next/glossary"}}');var t=s(74848),r=s(28453);const l={sidebar_position:4},a="LESSON-003: Intake Must Never Write Files to the Repository",o={},d=[{value:"Summary",id:"summary",level:2},{value:"Background",id:"background",level:2},{value:"Context",id:"context",level:3},{value:"Assumptions",id:"assumptions",level:3},{value:"What Happened",id:"what-happened",level:2},{value:"Event description",id:"event-description",level:3},{value:"Timeline",id:"timeline",level:3},{value:"Evidence",id:"evidence",level:3},{value:"Root Cause",id:"root-cause",level:2},{value:"Five Whys",id:"five-whys",level:3},{value:"True root cause",id:"true-root-cause",level:3},{value:"Lesson",id:"lesson",level:2},{value:"What we learned",id:"what-we-learned",level:3},{value:"Key insight",id:"key-insight",level:3},{value:"Actions",id:"actions",level:2},{value:"Immediate fixes",id:"immediate-fixes",level:3},{value:"Long-term changes",id:"long-term-changes",level:3},{value:"Documentation updates",id:"documentation-updates",level:3},{value:"Prevention",id:"prevention",level:2},{value:"How to avoid in future",id:"how-to-avoid-in-future",level:3},{value:"During intake sessions",id:"during-intake-sessions",level:3},{value:"Self-check before any file operation during intake",id:"self-check-before-any-file-operation-during-intake",level:3},{value:"For workers receiving intake-created issues",id:"for-workers-receiving-intake-created-issues",level:3},{value:"Related Lessons",id:"related-lessons",level:2},{value:"References",id:"references",level:2}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",input:"input",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"lesson-003-intake-must-never-write-files-to-the-repository",children:"LESSON-003: Intake Must Never Write Files to the Repository"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Date:"})," 2026-02-10"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Type:"})," Mistake"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Impact:"})," Quality"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Severity:"})," High"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"summary",children:"Summary"}),"\n",(0,t.jsx)(n.p,{children:"An intake session used the Write tool to create a file directly in the repository, bypassing the issue \u2192 branch \u2192 PR \u2192 CI \u2192 merge workflow that all repo changes must follow."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"background",children:"Background"}),"\n",(0,t.jsx)(n.h3,{id:"context",children:"Context"}),"\n",(0,t.jsx)(n.p,{children:"The project uses a strict delivery workflow: all repository changes must go through GitHub Issues, be implemented by workers on feature branches, pass CI, and merge via PR. Intake sessions exist to gather information, analyze the codebase, and create issues \u2014 never to modify the repository."}),"\n",(0,t.jsx)(n.h3,{id:"assumptions",children:"Assumptions"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:'The intake skill instructions stating "Never write files \u2014 intake is read-only on the repo" would be sufficient to prevent file writes'}),"\n",(0,t.jsx)(n.li,{children:'The assistant would distinguish between "gathering deliverable content" and "writing deliverable files"'}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"what-happened",children:"What Happened"}),"\n",(0,t.jsx)(n.h3,{id:"event-description",children:"Event description"}),"\n",(0,t.jsxs)(n.p,{children:["During an intake session, the user requested an evidence package. The assistant gathered metrics from git log, GitHub CLI, and file counts. Instead of creating a GitHub Issue describing the evidence package to be produced by a worker, the assistant used the Write tool to create ",(0,t.jsx)(n.code,{children:"EVIDENCE-PACKAGE.md"})," directly in the repository root."]}),"\n",(0,t.jsx)(n.h3,{id:"timeline",children:"Timeline"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"User requested an evidence package during intake"}),"\n",(0,t.jsx)(n.li,{children:"Intake gathered metrics from git log, gh CLI, and file counts"}),"\n",(0,t.jsxs)(n.li,{children:["Intake used the Write tool to create ",(0,t.jsx)(n.code,{children:"EVIDENCE-PACKAGE.md"})," in the repo root"]}),"\n",(0,t.jsx)(n.li,{children:'User flagged the violation: "Varf\xf6r skapar du filer, n\xe4r allt skall g\xe5 via issues?"'}),"\n",(0,t.jsx)(n.li,{children:"File was removed and a proper issue (#107) was created instead"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"evidence",children:"Evidence"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"EVIDENCE-PACKAGE.md"})," was written directly to the repository root during an intake session"]}),"\n",(0,t.jsx)(n.li,{children:"No branch, no PR, no CI check \u2014 the file bypassed the entire delivery workflow"}),"\n",(0,t.jsx)(n.li,{children:"Issue #107 was created after the user caught the mistake"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"root-cause",children:"Root Cause"}),"\n",(0,t.jsx)(n.h3,{id:"five-whys",children:"Five Whys"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why was the file written directly to the repo?"}),"\nThe assistant treated the evidence package as a deliverable to produce immediately rather than an issue to be implemented by a worker."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why did the assistant confuse gathering with producing?"}),"\nIntake gathered all the data needed for the evidence package, making the final Write step feel like a natural continuation of the same task."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why didn't the intake read-only rule prevent this?"}),"\nThe rule exists in the intake skill instructions but was not followed \u2014 the assistant prioritized completing the user's request over respecting the workflow boundary."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why is there a workflow boundary between intake and workers?"}),"\nBecause all repo changes must go through branches, CI, and PR review to maintain quality, traceability, and prevent unreviewed changes."]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Why is this boundary critical?"}),"\nWithout it, files can enter the repo without linting, build validation, or peer review \u2014 undermining the entire CI/CD pipeline."]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"true-root-cause",children:"True root cause"}),"\n",(0,t.jsx)(n.p,{children:"The assistant did not respect the separation of concerns between intake (read-only analysis \u2192 issue creation) and workers (issue \u2192 branch \u2192 implementation \u2192 PR \u2192 merge). The Write tool should never be invoked during an intake session for repository files."}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"lesson",children:"Lesson"}),"\n",(0,t.jsx)(n.h3,{id:"what-we-learned",children:"What we learned"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Intake sessions are strictly ",(0,t.jsx)(n.strong,{children:"read-only"})," on the repository"]}),"\n",(0,t.jsxs)(n.li,{children:["The only output mechanism for intake is ",(0,t.jsx)(n.code,{children:"gh issue create"})]}),"\n",(0,t.jsx)(n.li,{children:"Gathering data and producing deliverables are separate responsibilities \u2014 intake gathers, workers produce"}),"\n",(0,t.jsx)(n.li,{children:"Even when all the data is available, intake must not shortcut the delivery workflow"}),"\n",(0,t.jsx)(n.li,{children:"The Write, Edit, and NotebookEdit tools must never be used on repo files during intake"}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"key-insight",children:"Key insight"}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Intake has exactly one output: GitHub Issues."})," If you find yourself reaching for Write, Edit, git commit, or any file-modifying tool during intake \u2014 STOP. Create an issue instead and let the worker handle the implementation through the proper branch \u2192 PR \u2192 CI \u2192 merge workflow."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"actions",children:"Actions"}),"\n",(0,t.jsx)(n.h3,{id:"immediate-fixes",children:"Immediate fixes"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Removed ",(0,t.jsx)(n.code,{children:"EVIDENCE-PACKAGE.md"})," from the repository root"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Created issue #107 for the evidence package to be produced by a worker"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"long-term-changes",children:"Long-term changes"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Documented this lesson in ",(0,t.jsx)(n.code,{children:"docs/lessons-learned/"})]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Updated MEMORY.md with intake read-only rule"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"documentation-updates",children:"Documentation updates"}),"\n",(0,t.jsxs)(n.ul,{className:"contains-task-list",children:["\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Created this lesson file"]}),"\n",(0,t.jsxs)(n.li,{className:"task-list-item",children:[(0,t.jsx)(n.input,{type:"checkbox",checked:!0,disabled:!0})," ","Updated lessons-learned index"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"prevention",children:"Prevention"}),"\n",(0,t.jsx)(n.h3,{id:"how-to-avoid-in-future",children:"How to avoid in future"}),"\n",(0,t.jsx)(n.h3,{id:"during-intake-sessions",children:"During intake sessions"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Read-only tools only"}),": Read, Glob, Grep, git log, gh CLI queries"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Never use"}),": Write, Edit, NotebookEdit, git add, git commit, git push"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"One output"}),": ",(0,t.jsx)(n.code,{children:"gh issue create"})," \u2014 nothing else modifies the repo"]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"self-check-before-any-file-operation-during-intake",children:"Self-check before any file operation during intake"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Am I in an intake session? \u2192 Do NOT write files"}),"\n",(0,t.jsx)(n.li,{children:"Do I have data that should become a file? \u2192 Create an issue describing what the worker should produce"}),"\n",(0,t.jsx)(n.li,{children:'Am I tempted to "just quickly write this"? \u2192 STOP. Create an issue.'}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"for-workers-receiving-intake-created-issues",children:"For workers receiving intake-created issues"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Workers implement on feature branches"}),"\n",(0,t.jsx)(n.li,{children:"All changes go through CI and PR review"}),"\n",(0,t.jsx)(n.li,{children:'The delivery workflow is never bypassed, regardless of how "simple" the change seems'}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"related-lessons",children:"Related Lessons"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.a,{href:"/insurance-platform-requirements/docs/next/lessons-learned/LESSON-001-stale-git-index-build-failure",children:"LESSON-001"})," \u2014 Stale Git Index Causes Local Build Failures"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"references",children:"References"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Issue ",(0,t.jsx)(n.a,{href:"https://github.com/Agentic-software-factory/insurance-platform-requirements/issues/107",children:"#107"})," \u2014 Evidence package issue created after the mistake"]}),"\n",(0,t.jsxs)(n.li,{children:["Issue ",(0,t.jsx)(n.a,{href:"https://github.com/Agentic-software-factory/insurance-platform-requirements/issues/110",children:"#110"})," \u2014 This lesson documentation"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Template version:"})," 1.0\n",(0,t.jsx)(n.strong,{children:"Last updated:"})," 2026-02-10"]})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},28453(e,n,s){s.d(n,{R:()=>l,x:()=>a});var i=s(96540);const t={},r=i.createContext(t);function l(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);